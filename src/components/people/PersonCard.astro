---
import type { CollectionEntry } from "astro:content";
import { Image } from "astro:assets";

interface Props {
  person: CollectionEntry<"people">;
  size?: "default" | "large";
}

const { person, size = "default" } = Astro.props;
const { data, id } = person;
---

<a href={`/people/${id}`} class="card block group overflow-hidden">
  <div class={size === "large" ? "p-6" : "p-4"}>
    <div class="flex items-start gap-4">
      <div
        class:list={[
          "rounded-lg overflow-hidden shrink-0 bg-gray-100",
          size === "large" ? "w-24 h-24" : "w-16 h-16",
        ]}
      >
        <Image
          src={data.photo}
          alt={data.name}
          width={size === "large" ? 96 : 64}
          height={size === "large" ? 96 : 64}
          class="w-full h-full object-cover"
        />
      </div>
      <div class="min-w-0 flex-1">
        <h3
          class:list={[
            "font-semibold text-primary-900 group-hover:text-accent-600 transition-colors truncate",
            size === "large" ? "text-lg" : "text-base",
          ]}
        >
          {data.name}
        </h3>
        <p class="text-gray-600 text-sm">{data.title}</p>
        {
          data.researchInterests && data.researchInterests.length > 0 && (
            <div class="mt-2 flex flex-wrap gap-1">
              {data.researchInterests.slice(0, 3).map((interest) => (
                <span class="text-xs bg-primary-50 text-primary-700 px-2 py-0.5 rounded">
                  {interest}
                </span>
              ))}
            </div>
          )
        }
        {
          data.role === "alumni" && data.currentPosition && (
            <p class="text-gray-500 text-xs mt-2">
              Now: {data.currentPosition}
            </p>
          )
        }
      </div>
    </div>
  </div>
</a>
